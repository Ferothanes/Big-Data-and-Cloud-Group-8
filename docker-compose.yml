services:
  project_pipeline:
    platform: linux/amd64
    build:
      context: .
      dockerfile: dockerfile.dwh
    # volumes:
    #   #read-only bind mount
    #   - ${HOME}/.dbt/profiles.yml:/pipeline/profiles.yml:ro
    #   #blind mount
    #   - ./data_warehouse:/data_warehouse
    ports:
      - "3000:3000"
    image: crgroup8hr-aff9adfeagc0b7c0.azurecr.io/project_pipeline:latest

  project_dashboard:
    platform: linux/amd64
    build:
      context: .
      dockerfile: dockerfile.dashboard
    # volumes:
      # #read-only bind mount
      # - ./data_warehouse:/data_warehouse:ro
    ports:
      - "8501:8501"
    image: crgroup8hr-aff9adfeagc0b7c0.azurecr.io/project_dashboard:latest